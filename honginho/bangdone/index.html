<!DOCTYPE html>

<html lang="zh-tw">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

	<meta name="keywords" content="">
	<meta name="description" content="">

	<link href="images/favicon.png" rel="shortcut icon" type="image/png">
	<link rel="stylesheet" href="assets/css/main.css">

	<title> 自然派便當店 </title>
</head>

<body class="landing">
	<header id="header" class="alt">
		<h1><a href="index.html">Light Meal</a></h1>
		<a href="#nav">Menu</a>
	</header>

	<nav id="nav">
		<ul class="links">
			<li><a href="index.html">Home</a></li>
			<li><a href="http://www.ccu.edu.tw">Contact Us</a></li>
		</ul>
	</nav>

	<section id="banner">
		<i class="icon fa-home"></i>
		<h2>自然派便當店</h2>
		<p>維持體重也能享受美味，健康無負擔！</p>
		<ul class="actions">
			<li><a style="letter-spacing: 2px; user-select: none; pointer-events: none;" class="button big special">向下查看更多</a></li>
		</ul>
	</section>

	<section id="one" class="wrapper style1">
		<h1 style="padding-left: 0.8em; font-size: 3.6em; letter-spacing: 0.8em; text-align: center;">菜單</h1>
		<div class="inner">
			<article id="food0" class="feature left">
				<span class="image"><img src="images/bang0.jpg" alt="香煎雞胸便當" /></span>
				<div class="content">
					<h2>香煎雞胸便當</h2>
					<p>
						招牌！雞胸蛋白質含量高，富含卵磷脂，尤其適合有日常健身習慣和有減脂需求人士。我們提供的是高蛋白低脂少油低鹽產品，每份餐點的熱量也是合理設計搭配好的，絕對不用擔心吃了會變胖。
					</p>
					<ul class="actions">
						<li>
							<h2 style="margin-bottom: 0;">$<span class="price">80</span>元/份</h2>
						</li>
						<li>
							<a onclick="toCheckout(0);" class="button alt" style="letter-spacing: 4px;">購買</a>
						</li>
					</ul>
				</div>
			</article>
			<article id="food1" class="feature right">
				<span class="image"><img src="images/bang1.jpg" alt="黑椒煙燻烤鴨胸便當" /></span>
				<div class="content">
					<h2>黑椒煙燻烤鴨胸便當</h2>
					<p>
						一整塊鴨胸，熱量低，份量足，性價比極高！不去皮的鴨胸口感豐富而扎實，搭配鴨胸烤出來的鮮甜汁水更加美味，唯肉汁富含鴨油稍嫌油膩。我們提供的是高蛋白低脂少油低鹽產品，每份餐點的熱量也是合理設計搭配好的，絕對不用擔心吃了會變胖。
					</p>
					<ul class="actions">
						<li>
							<h2 style="margin-bottom: 0;">$<span class="price">80</span>元/份</h2>
						</li>
						<li>
							<a onclick="toCheckout(1);" class="button alt" style="letter-spacing: 4px;">購買</a>
						</li>
					</ul>
				</div>
			</article>
			<article id="food2" class="feature left">
				<span class="image"><img src="images/bang2.jpg" alt="法式香煎龍利魚便當" /></span>
				<div class="content">
					<h2>法式香煎龍利魚便當</h2>
					<p>
						龍利魚肉質鮮嫩，口感爽滑，所富含不飽和脂肪酸尤其適合每日用腦和用眼過多的人群。搭配我們秘制西式醬汁，清新可口，一嘗傑心。我們提供的是高蛋白低脂少油低鹽產品，每份餐點的熱量也是合理設計搭配好的，絕對不用擔心吃了會變胖。
					</p>
					<ul class="actions">
						<li>
							<h2 style="margin-bottom: 0;">$<span class="price">110</span>元/份</h2>
						</li>
						<li>
							<a onclick="toCheckout(2);" class="button alt" style="letter-spacing: 4px;">購買</a>
						</li>
					</ul>
				</div>
			</article>
			<article id="food3" class="feature right">
				<span class="image"><img src="images/bang3.jpg" alt="西冷牛排便當" /></span>
				<div class="content">
					<h2>西冷牛排便當</h2>
					<p>
						牛排選用草飼西冷牛排，位於牛下腰部位，肉質稍粗有嚼勁，建議食用5~7分熟。我們用的是原切牛排，絕非合成牛排。真牛排，就是實在！我們提供的是高蛋白低脂少油低鹽產品，每份餐點的熱量也是合理設計搭配好的，絕對不用擔心吃了會變胖。
					</p>
					<ul class="actions">
						<li>
							<h2 style="margin-bottom: 0;">$<span class="price">130</span>元/份</h2>
						</li>
						<li>
							<a onclick="toCheckout(3);" class="button alt" style="letter-spacing: 4px;">購買</a>
						</li>
					</ul>
				</div>
			</article>
		</div>
	</section>

	<footer id="footer">
		<div class="inner">
			<ul class="icons">
				<li><a href="#" class="icon fa-facebook">
					<span class="label">Facebook</span>
				</a></li>
				<li><a href="#" class="icon fa-twitter">
					<span class="label">Twitter</span>
				</a></li>
				<li><a href="#" class="icon fa-instagram">
					<span class="label">Instagram</span>
				</a></li>
				<li><a href="#" class="icon fa-linkedin">
					<span class="label">LinkedIn</span>
				</a></li>
			</ul>
			<ul class="copyright">
				<li>
					Copyright &copy; 2018
					<a href="http://www.ccu.edu.tw">CCU</a>.
				</li>
				<li> All rights reserved. </li>
			</ul>
		</div>
	</footer>

	<div class="checkout" style="display: none;">
		<div>
			<h1 class="text-center"> 確定結帳 </h1>
			<div id="sure-checkout">
				<div class="img"></div>
				<div class="details">
					<h2>
						<div class="name"></div>
					</h2>
					<p class="intro"></p>
					<h2>
						<input type="text" id="cardId" name="cardId" placeholder="請輸入卡號" required>
						<div>總金額：$<span class="price"></span>元</div>
					</h2>
					<ul class="actions" style="margin-bottom: 0;">
						<li>
							<a onclick="checkout();" class="button big special">結帳</a>
						</li>
						<li>
							<a onclick="uncheckout();" class="button big alt">取消</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="box-loading" style="display: none;">
		<div></div>
	</div>

	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/skel.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script>
		$(document).ready(function () {
			$('#cardId').keyup(function () {
				if ($('#cardId').val().length >= 10)
					checkout();
			});
		});

		function toCheckout(id) {
			let name = $('#food' + id + ' > .content > h2').text();
			let intro = $('#food' + id + ' > .content > p').text();
			let price = $('#food' + id + ' > .content .price').text();
			let img = `<img src="images/bang${id}.jpg" alt="${name}">`;

			$('#sure-checkout .img').html(img);
			$('#sure-checkout .name').html(name);
			$('#sure-checkout .intro').html(intro);
			$('#sure-checkout .price').html(price);

			$('.checkout').show();
			$('#cardId').focus();
		}

		function uncheckout() {
			$('.checkout').hide();
		}

		function checkout() {
			$('.box-loading').show();

			let cardId = $('#cardId').val();
			let price = $('#sure-checkout .price').text();

			if (cardId === '') {
				alert('資料輸入出錯。')
				$('.boxLoading').hide();
			}
			else {
				$.ajax({
					url: "checkout.php",
					method: "POST",
					data: {
						card_id: cardId,
						price: price,
						city: 'Tainan',
						store_id: 100001,
						machine_id: 200001
					},
					complete: function () {
						$('.box-loading').hide();
					},
					success: function (res) {
						alert(res);
						location.reload();
					},
					fail: function(res){
						alert(res);
					}
				});
			}
		}
	</script>
</body>
</html>